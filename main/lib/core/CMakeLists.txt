# GET_FILENAME_COMPONENT(OBJNAME ${CMAKE_CURRENT_LIST_DIR} NAME)

add_definitions("-DEUDAQ_CORE_EXPORTS")
include_directories(include)
include_directories(include/eudaq)

aux_source_directory(src CORE_SRC)
add_library(${PROJECT_NAME} SHARED ${CORE_SRC})
set_target_properties(${PROJECT_NAME} PROPERTIES DEFINE_SYMBOL "core_EXPORTS" )
set_target_properties(${PROJECT_NAME} PROPERTIES VERSION ${EUDAQ_VERSION_MAJOR}.${EUDAQ_VERSION_MINOR})

IF(UNIX)
  TARGET_LINK_LIBRARIES(${PROJECT_NAME}  ${EUDAQ_THREADS_LIB} ${ADDITIONAL_LIBRARIES} dl stdc++fs)
ELSE()
  TARGET_LINK_LIBRARIES(${PROJECT_NAME}  ${EUDAQ_THREADS_LIB} ${ADDITIONAL_LIBRARIES} )
ENDIF()

INSTALL(TARGETS ${PROJECT_NAME}
  RUNTIME DESTINATION bin
  LIBRARY DESTINATION lib
  ARCHIVE DESTINATION lib
  )

